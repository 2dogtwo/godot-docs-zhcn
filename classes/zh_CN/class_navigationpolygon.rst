:github_url: hide

.. DO NOT EDIT THIS FILE!!!
.. Generated automatically from Godot engine sources.
.. Generator: https://github.com/godotengine/godot/tree/master/doc/tools/make_rst.py.
.. XML source: https://github.com/godotengine/godot/tree/master/doc/classes/NavigationPolygon.xml.

.. _class_NavigationPolygon:

NavigationPolygon
=================

**Inherits:** :ref:`Resource<class_Resource>` **<** :ref:`RefCounted<class_RefCounted>` **<** :ref:`Object<class_Object>`

定义可达区域和障碍物的导航多边形。

.. rst-class:: classref-introduction-group

Description
-----------

创建多边形有两种方法。通过使用 :ref:`add_outline<class_NavigationPolygon_method_add_outline>` 方法，或使用 :ref:`add_polygon<class_NavigationPolygon_method_add_polygon>` 方法。

使用 :ref:`add_outline<class_NavigationPolygon_method_add_outline>` 方法：


.. tabs::

 .. code-tab:: gdscript

    var polygon = NavigationPolygon.new()
    var outline = PackedVector2Array([Vector2(0, 0), Vector2(0, 50), Vector2(50, 50), Vector2(50, 0)])
    polygon.add_outline(outline)
    polygon.make_polygons_from_outlines()
    $NavigationRegion2D.navigation_polygon = polygon

 .. code-tab:: csharp

    var polygon = new NavigationPolygon();
    var outline = new Vector2[] { new Vector2(0, 0), new Vector2(0, 50), new Vector2(50, 50), new Vector2(50, 0) };
    polygon.AddOutline(outline);
    polygon.MakePolygonsFromOutlines();
    GetNode<NavigationRegion2D>("NavigationRegion2D").NavigationPolygon = polygon;



使用 :ref:`add_polygon<class_NavigationPolygon_method_add_polygon>` 和顶点数组的索引。


.. tabs::

 .. code-tab:: gdscript

    var polygon = NavigationPolygon.new()
    var vertices = PackedVector2Array([Vector2(0, 0), Vector2(0, 50), Vector2(50, 50), Vector2(50, 0)])
    polygon.vertices = vertices
    var indices = PackedInt32Array([0, 1, 2, 3])
    polygon.add_polygon(indices)
    $NavigationRegion2D.navigation_polygon = polygon

 .. code-tab:: csharp

    var polygon = new NavigationPolygon();
    var vertices = new Vector2[] { new Vector2(0, 0), new Vector2(0, 50), new Vector2(50, 50), new Vector2(50, 0) };
    polygon.Vertices = vertices;
    var indices = new int[] { 0, 1, 2, 3 };
    polygon.AddPolygon(indices);
    GetNode<NavigationRegion2D>("NavigationRegion2D").NavigationPolygon = polygon;



.. rst-class:: classref-introduction-group

Tutorials
---------

- `2D 导航演示 <https://godotengine.org/asset-library/asset/117>`__

- :doc:`使用 NavigationMesh <../tutorials/navigation/navigation_using_navigationmeshes>`

.. rst-class:: classref-reftable-group

Properties
----------

.. table::
   :widths: auto

   +---------------------------+--------------------------------------------------------------+---------+
   | :ref:`float<class_float>` | :ref:`cell_size<class_NavigationPolygon_property_cell_size>` | ``1.0`` |
   +---------------------------+--------------------------------------------------------------+---------+

.. rst-class:: classref-reftable-group

Methods
-------

.. table::
   :widths: auto

   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`add_outline<class_NavigationPolygon_method_add_outline>` **(** :ref:`PackedVector2Array<class_PackedVector2Array>` outline **)**                                                |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`add_outline_at_index<class_NavigationPolygon_method_add_outline_at_index>` **(** :ref:`PackedVector2Array<class_PackedVector2Array>` outline, :ref:`int<class_int>` index **)** |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`add_polygon<class_NavigationPolygon_method_add_polygon>` **(** :ref:`PackedInt32Array<class_PackedInt32Array>` polygon **)**                                                    |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`clear<class_NavigationPolygon_method_clear>` **(** **)**                                                                                                                        |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`clear_outlines<class_NavigationPolygon_method_clear_outlines>` **(** **)**                                                                                                      |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`clear_polygons<class_NavigationPolygon_method_clear_polygons>` **(** **)**                                                                                                      |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`NavigationMesh<class_NavigationMesh>`         | :ref:`get_navigation_mesh<class_NavigationPolygon_method_get_navigation_mesh>` **(** **)**                                                                                            |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`PackedVector2Array<class_PackedVector2Array>` | :ref:`get_outline<class_NavigationPolygon_method_get_outline>` **(** :ref:`int<class_int>` idx **)** |const|                                                                          |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                               | :ref:`get_outline_count<class_NavigationPolygon_method_get_outline_count>` **(** **)** |const|                                                                                        |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`PackedInt32Array<class_PackedInt32Array>`     | :ref:`get_polygon<class_NavigationPolygon_method_get_polygon>` **(** :ref:`int<class_int>` idx **)**                                                                                  |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                               | :ref:`get_polygon_count<class_NavigationPolygon_method_get_polygon_count>` **(** **)** |const|                                                                                        |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`PackedVector2Array<class_PackedVector2Array>` | :ref:`get_vertices<class_NavigationPolygon_method_get_vertices>` **(** **)** |const|                                                                                                  |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`make_polygons_from_outlines<class_NavigationPolygon_method_make_polygons_from_outlines>` **(** **)**                                                                            |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`remove_outline<class_NavigationPolygon_method_remove_outline>` **(** :ref:`int<class_int>` idx **)**                                                                            |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`set_outline<class_NavigationPolygon_method_set_outline>` **(** :ref:`int<class_int>` idx, :ref:`PackedVector2Array<class_PackedVector2Array>` outline **)**                     |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`set_vertices<class_NavigationPolygon_method_set_vertices>` **(** :ref:`PackedVector2Array<class_PackedVector2Array>` vertices **)**                                             |
   +-----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

Property Descriptions
---------------------

.. _class_NavigationPolygon_property_cell_size:

.. rst-class:: classref-property

:ref:`float<class_float>` **cell_size** = ``1.0``

.. rst-class:: classref-property-setget

- void **set_cell_size** **(** :ref:`float<class_float>` value **)**
- :ref:`float<class_float>` **get_cell_size** **(** **)**

用于将导航网格顶点栅格化的单元格大小。必须与导航地图上的单元格大小相匹配。

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

Method Descriptions
-------------------

.. _class_NavigationPolygon_method_add_outline:

.. rst-class:: classref-method

void **add_outline** **(** :ref:`PackedVector2Array<class_PackedVector2Array>` outline **)**

将包含轮廓顶点的 :ref:`PackedVector2Array<class_PackedVector2Array>`\ ，追加到包含所有轮廓的内部数组。必须调用 :ref:`make_polygons_from_outlines<class_NavigationPolygon_method_make_polygons_from_outlines>` 才能将该数组转换为引擎将使用的多边形。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_add_outline_at_index:

.. rst-class:: classref-method

void **add_outline_at_index** **(** :ref:`PackedVector2Array<class_PackedVector2Array>` outline, :ref:`int<class_int>` index **)**

将包含轮廓顶点的 :ref:`PackedVector2Array<class_PackedVector2Array>`\ ，添加到包含位于固定位置处的所有轮廓的内部数组。必须调用 :ref:`make_polygons_from_outlines<class_NavigationPolygon_method_make_polygons_from_outlines>` 才能将该数组转换为引擎将使用的多边形。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_add_polygon:

.. rst-class:: classref-method

void **add_polygon** **(** :ref:`PackedInt32Array<class_PackedInt32Array>` polygon **)**

使用调用 :ref:`get_vertices<class_NavigationPolygon_method_get_vertices>` 得到的顶点的索引添加一个多边形。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_clear:

.. rst-class:: classref-method

void **clear** **(** **)**

Clears the internal arrays for vertices and polygon indices.

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_clear_outlines:

.. rst-class:: classref-method

void **clear_outlines** **(** **)**

清除轮廓数组，但不清除顶点和由顶点创建的多边形。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_clear_polygons:

.. rst-class:: classref-method

void **clear_polygons** **(** **)**

清除多边形数组，但不清除轮廓和顶点数组。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_get_navigation_mesh:

.. rst-class:: classref-method

:ref:`NavigationMesh<class_NavigationMesh>` **get_navigation_mesh** **(** **)**

返回由该导航多边形产生的 :ref:`NavigationMesh<class_NavigationMesh>`\ 。该导航网格可用于使用 :ref:`NavigationServer3D.region_set_navigation_mesh<class_NavigationServer3D_method_region_set_navigation_mesh>` API 直接更新区块的导航网格（因为 2D 在幕后使用 3D 服务器）。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_get_outline:

.. rst-class:: classref-method

:ref:`PackedVector2Array<class_PackedVector2Array>` **get_outline** **(** :ref:`int<class_int>` idx **)** |const|

返回一个 :ref:`PackedVector2Array<class_PackedVector2Array>`\ ，其中包含在编辑器中或通过脚本创建的轮廓的顶点。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_get_outline_count:

.. rst-class:: classref-method

:ref:`int<class_int>` **get_outline_count** **(** **)** |const|

返回在编辑器或脚本中创建的轮廓的数量。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_get_polygon:

.. rst-class:: classref-method

:ref:`PackedInt32Array<class_PackedInt32Array>` **get_polygon** **(** :ref:`int<class_int>` idx **)**

返回创建多边形的顶点索引，形式为 :ref:`PackedInt32Array<class_PackedInt32Array>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_get_polygon_count:

.. rst-class:: classref-method

:ref:`int<class_int>` **get_polygon_count** **(** **)** |const|

返回多边形的数量。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_get_vertices:

.. rst-class:: classref-method

:ref:`PackedVector2Array<class_PackedVector2Array>` **get_vertices** **(** **)** |const|

返回一个 :ref:`PackedVector2Array<class_PackedVector2Array>`\ ，其中包含用于创建多边形的所有顶点。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_make_polygons_from_outlines:

.. rst-class:: classref-method

void **make_polygons_from_outlines** **(** **)**

从编辑器或脚本中添加的轮廓创建多边形。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_remove_outline:

.. rst-class:: classref-method

void **remove_outline** **(** :ref:`int<class_int>` idx **)**

删除在编辑器或脚本中创建的轮廓。你必须调用 :ref:`make_polygons_from_outlines<class_NavigationPolygon_method_make_polygons_from_outlines>` 来更新多边形。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_set_outline:

.. rst-class:: classref-method

void **set_outline** **(** :ref:`int<class_int>` idx, :ref:`PackedVector2Array<class_PackedVector2Array>` outline **)**

更改在编辑器或脚本中创建的轮廓。你必须调用 :ref:`make_polygons_from_outlines<class_NavigationPolygon_method_make_polygons_from_outlines>` 来更新多边形。

.. rst-class:: classref-item-separator

----

.. _class_NavigationPolygon_method_set_vertices:

.. rst-class:: classref-method

void **set_vertices** **(** :ref:`PackedVector2Array<class_PackedVector2Array>` vertices **)**

设置顶点，可以使用 :ref:`add_polygon<class_NavigationPolygon_method_add_polygon>` 方法对其进行索引，创建多边形。

.. |virtual| replace:: :abbr:`virtual (This method should typically be overridden by the user to have any effect.)`
.. |const| replace:: :abbr:`const (This method has no side effects. It doesn't modify any of the instance's member variables.)`
.. |vararg| replace:: :abbr:`vararg (This method accepts any number of arguments after the ones described here.)`
.. |constructor| replace:: :abbr:`constructor (This method is used to construct a type.)`
.. |static| replace:: :abbr:`static (This method doesn't need an instance to be called, so it can be called directly using the class name.)`
.. |operator| replace:: :abbr:`operator (This method describes a valid operator to use with this type as left-hand operand.)`
.. |bitfield| replace:: :abbr:`BitField (This value is an integer composed as a bitmask of the following flags.)`
